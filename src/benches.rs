extern crate test;
use test::{Bencher, black_box};
use crate::unpack;

#[bench]
fn mangafox(b: &mut Bencher) {
    b.iter(|| {
        black_box(unpack(
            r#"eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1;};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p;}('d E=[\'//c.4.b/3/1/2/9.0/a/w.8?6=v&7=5\',\'//c.4.b/3/1/2/9.0/a/x.8?6=z&7=5\',\'//c.4.b/3/1/2/9.0/a/y.8?6=u&7=5\',\'//c.4.b/3/1/2/9.0/a/q.8?6=p&7=5\',\'//c.4.b/3/1/2/9.0/a/r.8?6=t&7=5\',\'//c.4.b/3/1/2/9.0/a/s.8?6=A&7=5\',\'//c.4.b/3/1/2/9.0/a/I.8?6=H&7=5\',\'//c.4.b/3/1/2/9.0/a/J.8?6=L&7=5\',\'//c.4.b/3/1/2/9.0/a/K.8?6=G&7=5\',\'//c.4.b/3/1/2/9.0/a/C.8?6=B&7=5\',\'//c.4.b/3/1/2/9.0/a/D.8?6=F&7=5\',\'//c.4.b/3/1/2/9.0/a/g.8?6=j&7=5\',\'//c.4.b/3/1/2/9.0/a/h.8?6=i&7=5\',\'//c.4.b/3/1/2/9.0/a/o.8?6=l&7=5\',\'//c.4.b/3/1/2/9.0/a/k.8?6=m&7=5\',\'//c.4.b/3/1/2/9.0/a/n.8?6=f&7=5\',\'//c.4.b/3/1/2/9.0/a/e.8?6=M&7=5\',\'//c.4.b/3/1/2/9.0/a/16.8?6=19&7=5\',\'//c.4.b/3/1/2/9.0/a/18.8?6=1b&7=5\',\'//c.4.b/3/1/2/9.0/a/1a.8?6=15&7=5\',\'//c.4.b/3/1/2/9.0/a/14.8?6=17&7=5\',\'//c.4.b/3/1/2/9.0/a/1h.8?6=1g&7=5\'];d 1j=[1i,1d,1c,1f,1e,S,R,U,T,O,N,Q,P,V,11,10,13,12,X,W,Z,Y];',62,82,'|manga|21619|store|mangafox|1675958400|token|ttl|jpg|126|compressed|me|zjcdn|var|g016|db0af9327aa5f75197427efa4f079be70201cd13|g011|g012|33ddfe0ff12924268a7d20cb63addbcd7d6cdee6|a73649719606232430e76395b8b1e741730d4970|g014|5ac050c927682c56e1a83f226a547f00d4e4faee|e7501a5c573544840d40080d4e60598db9d4addf|g015|g013|b237edd2b93bbf51d4d08b394701baff75f7c31d|g003|g004|g005|bbd3637d291c7b8f2989e17f8f4a7d07eae9bb3a|1a84db22fa4b3241b5f434450d093086e2a35532|c97bea81c2125fcd89951ef5446e6fec7349d09e|g000|g001|g002|b8737f19e4838d92e581e66ac62bf8d46974b0a4|04faaf873ea2f2df6a9f14a74b2d310d53bd4875|35f937d01c1eb0865705e8867c34a609c4679051|g009|g010|newImgs|cbd4776bcb2507efedc5d2be414f9309d664d4a0|5f7e162c8aa9d89e8b6d9c5a093da4bc2c578b24|21ee12733867d2199e62b405bb553a9bd2855f3c|g006|g007|g008|632a12bd8510ad1f6f1361337b14427bd010bc8a|fddda5e1fdaf1c456b386d2cde2e0ae95a3f58c0|28427148|28427147|28427150|28427149|28427144|28427143|28427146|28427145|28427151|28427157|28427156|28427159|28427158|28427153|28427152|28427155|28427154|g020|3b6fdbcbc5a635265d4c6e7ca6ee765928b679da|g017|d5ca636870fd8cec3080a78552521409f30a5c42|g018|d3d1d2571174e1d0e731e3dcfe1533786b66a7ed|g019|3dc78deac0ca8c49de91153de8081c64a547d2b8|28427140|28427139|28427142|28427141|4526d1cb5eebfb3fef3dc90f66a6369cc937a3aa|g021|28427138|newImginfos'.split('|'),0,{}))"#
        ))
    });
}

#[bench]
fn mangabz(b: &mut Bencher) {
    b.iter(|| {
        black_box(unpack(
            r#"(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1;};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p;}('r s=[\'4://5.6.7/1/2/0/q.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/o.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/p.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/w.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/x.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/v.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/t.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/u.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/h.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/i.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/g.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/e.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/f.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/m.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/n.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/l.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/k.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/j.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/K.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/L.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/I.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/J.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/M.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/P.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/Q.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/N.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/O.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/H.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/A.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/B.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/y.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/z.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/C.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/F.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/G.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/D.3?8=0&c=d&9=1&a=b\',\'4://5.6.7/1/2/0/E.3?8=0&c=d&9=1&a=b\'];',53,53,'271472||38|jpg|https|image|mangabz|com|cid|type|uk|707970C804232C294E64C17AE0856F1076D3B5B15415C16B1628BF7DB21E6617FD7D717FB1348A4A|key|bfbab53d4c4ac7ca0042a613778aae30|12_7672|13_7863|11_9402|9_5211|10_7041|18_4155|17_7481|16_2278|14_4274|15_8698|2_5708|3_1424|1_9785|var|newImgs|7_4885|8_1241|6_2633|4_9891|5_9947|31_2667|32_4522|29_4954|30_4786|33_9041|36_7917|37_1216|34_9821|35_5968|28_2160|21_3329|22_2428|19_1319|20_8792|23_9412|26_9641|27_7765|24_9406|25_2820'.split('|'),0,{}))"#,
        ))
    });
}
